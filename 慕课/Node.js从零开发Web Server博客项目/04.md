## 开发博客项目之接口

### http请求概述

1. 从输入url到显示页面的过程？
    + DNS解析（将域名转为服务器ip+port、本地缓存查找和请求服务查找）、TCP连接（三次握手）、发送http请求（request header）
    + server接口http请求处理并返回请求（response header和response body）
    + 客户端浏览器接受数据、处理数据显示页面之类的

### nodejs处理http请求

0. 简单示例

```
const  http = require('http')

const server = http.createServer((req,res)=>{
    res.end("hello world")
})

server.listen(3000,()=>{
    console.log('server listen...')
})
```

1. get请求数据和querystring

```
const  http = require('http')
const  querystring = require('querystring')

const server = http.createServer((req,res)=>{
    console.log(req.method)
    const url = req.url;
    console.log(url)
    <!-- 取问号后面的参数 -->
    req.query  = querystring.parse(url.split("?")[1])
    res.end(JSON.stringify(req.query))
})

server.listen(3000,()=>{
    console.log('server listen...')
})
```

2. post发送数据和postdata

    + 安装postman模拟发送请求

```
const  http = require('http')
const  querystring = require('querystring')

const server = http.createServer((req,res)=>{
    console.log(req.method)
    let  postdata = ""
    <!-- 管道、不停的监听、接收数据 -->
    req.on("data",(chunk)=>{
        postdata += chunk.toString()
    })
    <!-- 管道结束 -->
    req.on("end",()=>{
        console.log(postdata)
        res.end(JSON.stringify(postdata))
    })
})

server.listen(3000,()=>{
    console.log('server listen...')
})
```

3. 路由（接口地址）


### 搭建开发环境（blog-1目录）

1. nodemon检测文件变化
2. cross-env设置环境变量，兼容windows、linux、
3. process 是node提供的内部模块，取得命令行设置的环境变量
4. www.js和app.js：独立分开负责不同的事情，互不影响、

```
npm install nodemon cross-env --save-dev
cross-env NODE_ENV=production
process.env.NODE_ENV
```

### 初始化路由

1： 将路由和数据处理分离，符合设计原则
